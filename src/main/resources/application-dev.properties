# 메인 DB (eri_db) - 반드시 spring.datasource로!
spring.datasource.jdbc-url=jdbc:postgresql://localhost:5432/eri_db
spring.datasource.username=nicdb
spring.datasource.password=Nicdb2023!
spring.datasource.driver-class-name=org.postgresql.Driver

# 암호화 DB (eri_enc_db) - 별도 prefix
spring.datasource.encryption.jdbc-url=jdbc:postgresql://localhost:5432/eri_enc_db
spring.datasource.encryption.username=nicdb
spring.datasource.encryption.password=Nicdb2023!
spring.datasource.encryption.driver-class-name=org.postgresql.Driver

# 암호화 데이터베이스 연결 풀 설정
spring.datasource.encryption.hikari.connection-test-query=SELECT 1
spring.datasource.encryption.hikari.maximum-pool-size=5
spring.datasource.encryption.hikari.minimum-idle=2

# 데이터베이스 연결 테스트
spring.datasource.hikari.connection-test-query=SELECT 1
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=5

# MyBatis 설정
mybatis.mapper-locations=classpath:mappers/**/*.xml
mybatis.type-aliases-package=com.ERI.demo.vo
mybatis.configuration.map-underscore-to-camel-case=true
mybatis.configuration.log-impl=org.apache.ibatis.logging.stdout.StdOutImpl

# 암호화 데이터베이스 MyBatis 로깅 설정
logging.level.com.ERI.demo.mappers.encryption=INFO

# JPA 설정 (사용하지 않는 경우 주석 처리)
#spring.jpa.hibernate.ddl-auto=update
#spring.jpa.show-sql=true
#spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect

# ===== 인코딩 설정 (한글 깨짐 방지) =====
server.servlet.encoding.charset=UTF-8
server.servlet.encoding.force=true
server.servlet.encoding.enabled=true

# ===== 직원정보 암호화 해시 솔트 (개발 환경) =====
eri.hash.salt=ERI_DEV_HASH_SALT_2029

# ===== 개발 환경 로깅 설정 =====
# 개발 환경에서는 상세한 로깅을 활성화
logging.level.root=INFO
logging.level.com.ERI.demo=DEBUG
logging.level.org.springframework.web=INFO
logging.level.org.springframework.security=INFO
logging.level.org.mybatis=DEBUG
logging.level.org.apache.ibatis=DEBUG
logging.level.com.ERI.demo.mappers=DEBUG

# SQL 쿼리 로깅 (개발 환경에서만 활성화)
logging.level.org.springframework.jdbc.core.JdbcTemplate=DEBUG
logging.level.org.springframework.jdbc.core.StatementCreatorUtils=DEBUG

# MyBatis SQL 로깅 상세 설정 (개발 환경)
logging.level.com.ERI.demo.mappers.FileAttachMapper=DEBUG
logging.level.com.ERI.demo.mappers.NtiLstMapper=DEBUG
logging.level.com.ERI.demo.mappers.EmpLstMapper=DEBUG
logging.level.com.ERI.demo.mappers.AuthLstMapper=DEBUG
logging.level.com.ERI.demo.mappers.CmnGrpCdMapper=DEBUG
logging.level.com.ERI.demo.mappers.CmnDtlCdMapper=DEBUG
logging.level.com.ERI.demo.mappers.MnuLstMapper=DEBUG
logging.level.com.ERI.demo.mappers.AdminLstMapper=DEBUG
logging.level.com.ERI.demo.mappers.DeptLstMapper=DEBUG
logging.level.com.ERI.demo.mappers.NoticeController=DEBUG

# 로그 패턴 (개발 환경용 - 더 상세한 정보 포함)
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{50} - %msg%n

# 로그 파일 설정 (Spring Boot 3.x 방식)
logging.logback.rollingpolicy.file-name-pattern=logs/eri-dev-%d{yyyy-MM-dd}.%i.log
logging.logback.rollingpolicy.max-file-size=10MB
logging.logback.rollingpolicy.max-history=7

# ===== DEBUG 로그 숨김 설정 =====
# Tomcat 네이티브 라이브러리 관련 DEBUG 로그 숨김
logging.level.org.apache.catalina.core.AprLifecycleListener=ERROR

# Tomcat JRE 호환성 관련 DEBUG 로그 숨김
logging.level.org.apache.tomcat.util.compat=ERROR
logging.level.org.apache.tomcat=ERROR

# JMX 관련 DEBUG 로그 숨김
logging.level.sun.rmi.server.call=ERROR
logging.level.javax.management=ERROR

# RMI 관련 DEBUG 로그 숨김
logging.level.sun.rmi=ERROR
logging.level.sun.rmi.transport=ERROR
logging.level.sun.rmi.loader=ERROR
logging.level.sun.rmi.server=ERROR

# Spring Boot 조건부 평가 리포트 DEBUG 로그 숨김
logging.level.org.springframework.boot.autoconfigure.logging.ConditionEvaluationReportLogger=ERROR
logging.level.org.springframework.boot.autoconfigure=ERROR

# HikariCP 연결 풀 관련 로그 숨김
logging.level.com.zaxxer.hikari=OFF
logging.level.com.zaxxer.hikari.pool.HikariPool=OFF
logging.level.com.zaxxer.hikari.HikariConfig=OFF
logging.level.com.zaxxer.hikari.pool=OFF
logging.level.com.zaxxer=OFF

# PostgreSQL 드라이버 관련 로그 숨김
logging.level.org.postgresql=OFF
logging.level.org.postgresql.jdbc.PgConnection=OFF
logging.level.org.postgresql.core.v3.ConnectionFactoryImpl=OFF
logging.level.org.postgresql.Driver=OFF
logging.level.org.postgresql.core=OFF

# ===== 파일 업로드 설정 =====
# 파일 업로드 경로 (절대 경로 사용)
file.upload.path=${user.home}/eri-uploads
# 최대 파일 크기 (10MB)
file.upload.max-size=10485760
# 허용된 파일 확장자
file.upload.allowed-extensions=pdf,doc,docx,xls,xlsx,ppt,pptx,txt,jpg,jpeg,png,gif,bmp,webp,zip,rar,7z
# 최대 파일 개수
file.upload.max-files=10
# Spring Multipart 설정
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=50MB
spring.servlet.multipart.enabled=true 