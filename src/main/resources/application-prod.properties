# ===== 서버 설정 =====
server.port=8080

# 운영 환경 설정 - PostgreSQL (환경변수 우선, 기본값 제공)
spring.datasource.jdbc-url=${SPRING_DATASOURCE_URL:jdbc:postgresql://172.18.16.1:5432/eri_db}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:nicdb}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:Nicdb2023!}
spring.datasource.driver-class-name=org.postgresql.Driver

# 데이터베이스 연결 테스트
spring.datasource.hikari.connection-test-query=SELECT 1
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=5

# ===== 직원 정보 DB (eri_employee_db) 설정 =====
# 직원 정보 DB 연결 (환경변수 우선, 기본값 제공)
spring.datasource.employee.jdbc-url=${SPRING_DATASOURCE_EMPLOYEE_URL:jdbc:postgresql://172.18.16.1:5433/eri_employee_db}
spring.datasource.employee.username=${SPRING_DATASOURCE_EMPLOYEE_USERNAME:nicdb}
spring.datasource.employee.password=${SPRING_DATASOURCE_EMPLOYEE_PASSWORD:Nicdb2023!}
spring.datasource.employee.driver-class-name=org.postgresql.Driver

# 직원 정보 DB 연결 풀 설정
spring.datasource.employee.hikari.connection-test-query=SELECT 1
spring.datasource.employee.hikari.maximum-pool-size=5
spring.datasource.employee.hikari.minimum-idle=2

# MyBatis 설정
mybatis.mapper-locations=classpath:mappers/**/*.xml
mybatis.type-aliases-package=com.ERI.demo.vo
mybatis.configuration.map-underscore-to-camel-case=true
mybatis.configuration.log-impl=org.apache.ibatis.logging.stdout.StdOutImpl

# JPA 설정 (사용하지 않는 경우 주석 처리)
#spring.jpa.hibernate.ddl-auto=update
#spring.jpa.show-sql=true
#spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect

# 운영 환경 설정
# 데이터베이스 설정은 운영 환경에 맞게 수정 필요
#spring.datasource.url=jdbc:postgresql://production-server:5432/eri_db
#spring.datasource.username=prod_user
#spring.datasource.password=prod_password

# ===== 운영 환경 로깅 설정 =====
# 운영 환경에서는 중요한 로그만 기록
logging.level.root=WARN
logging.level.com.ERI.demo=INFO
logging.level.org.springframework.web=WARN
logging.level.org.springframework.security=WARN

# MyBatis 로깅 (운영 환경에서는 최소화)
logging.level.org.mybatis=WARN
logging.level.org.apache.ibatis=WARN

# 로그 패턴 (운영 환경용 - 간결한 정보)
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n

# 로그 파일 설정 (Spring Boot 3.x 방식)
logging.logback.rollingpolicy.file-name-pattern=logs/eri-prod-%d{yyyy-MM-dd}.%i.log
logging.logback.rollingpolicy.max-file-size=100MB
logging.logback.rollingpolicy.max-history=30 