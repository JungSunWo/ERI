<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ERI.demo.mappers.PgmCntnTrsmDtlMapper">

    <!-- 프로그램 콘텐츠 발송 명세 목록 조회 -->
    <select id="selectPgmCntnTrsmDtlList" parameterType="com.ERI.demo.vo.PgmCntnTrsmDtlVO" resultType="com.ERI.demo.vo.PgmCntnTrsmDtlVO">
        SELECT 
            PGM_ID,
            CNTN_SEQ,
            CNTN_TTL,
            CNTN_CNTN,
            CNTN_TRSM_DT,
            CNTN_TRSM_TM,
            RGST_DT,
            RGST_TM,
            REG_EMP_ID,
            UPDT_DT,
            UPDT_TM,
            UPD_EMP_ID
        FROM TB_PGM_CNTN_TRSM_DTL
        <where>
            <if test="pgmId != null and pgmId != ''">
                AND PGM_ID = #{pgmId}
            </if>
            <if test="cntnSeq != null">
                AND CNTN_SEQ = #{cntnSeq}
            </if>
            <if test="cntnTtl != null and cntnTtl != ''">
                AND CNTN_TTL LIKE CONCAT('%', #{cntnTtl}, '%')
            </if>
            <if test="cntnTrsmDt != null">
                AND CNTN_TRSM_DT = #{cntnTrsmDt}
            </if>
            <if test="regEmpId != null and regEmpId != ''">
                AND REG_EMP_ID = #{regEmpId}
            </if>
        </where>
        ORDER BY PGM_ID, CNTN_SEQ
    </select>

    <!-- 프로그램 콘텐츠 발송 명세 상세 조회 -->
    <select id="selectPgmCntnTrsmDtl" resultType="com.ERI.demo.vo.PgmCntnTrsmDtlVO">
        SELECT 
            PGM_ID,
            CNTN_SEQ,
            CNTN_TTL,
            CNTN_CNTN,
            CNTN_TRSM_DT,
            CNTN_TRSM_TM,
            RGST_DT,
            RGST_TM,
            REG_EMP_ID,
            UPDT_DT,
            UPDT_TM,
            UPD_EMP_ID
        FROM TB_PGM_CNTN_TRSM_DTL
        WHERE PGM_ID = #{pgmId} AND CNTN_SEQ = #{cntnSeq}
    </select>

    <!-- 프로그램 콘텐츠 발송 명세 등록 -->
    <insert id="insertPgmCntnTrsmDtl" parameterType="com.ERI.demo.vo.PgmCntnTrsmDtlVO">
        INSERT INTO TB_PGM_CNTN_TRSM_DTL (
            PGM_ID,
            CNTN_SEQ,
            CNTN_TTL,
            CNTN_CNTN,
            CNTN_TRSM_DT,
            CNTN_TRSM_TM,
            RGST_DT,
            RGST_TM,
            REG_EMP_ID
        ) VALUES (
            #{pgmId},
            #{cntnSeq},
            #{cntnTtl},
            #{cntnCntn},
            #{cntnTrsmDt},
            #{cntnTrsmTm},
            #{rgstDt},
            #{rgstTm},
            #{regEmpId}
        )
    </insert>

    <!-- 프로그램 콘텐츠 발송 명세 수정 -->
    <update id="updatePgmCntnTrsmDtl" parameterType="com.ERI.demo.vo.PgmCntnTrsmDtlVO">
        UPDATE TB_PGM_CNTN_TRSM_DTL
        SET 
            CNTN_TTL = #{cntnTtl},
            CNTN_CNTN = #{cntnCntn},
            CNTN_TRSM_DT = #{cntnTrsmDt},
            CNTN_TRSM_TM = #{cntnTrsmTm},
            UPDT_DT = #{updtDt},
            UPDT_TM = #{updtTm},
            UPD_EMP_ID = #{updEmpId}
        WHERE PGM_ID = #{pgmId} AND CNTN_SEQ = #{cntnSeq}
    </update>

    <!-- 프로그램 콘텐츠 발송 명세 삭제 -->
    <delete id="deletePgmCntnTrsmDtl">
        DELETE FROM TB_PGM_CNTN_TRSM_DTL
        WHERE PGM_ID = #{pgmId} AND CNTN_SEQ = #{cntnSeq}
    </delete>

</mapper> 