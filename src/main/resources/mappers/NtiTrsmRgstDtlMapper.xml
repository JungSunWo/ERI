<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ERI.demo.mappers.NtiTrsmRgstDtlMapper">

    <!-- 공지사항 발송등록 명세 목록 조회 -->
    <select id="selectNtiTrsmRgstDtlList" parameterType="com.ERI.demo.vo.NtiTrsmRgstDtlVO" resultType="com.ERI.demo.vo.NtiTrsmRgstDtlVO">
        SELECT 
            RGST_DT,
            SEQ,
            NTI_SEQ,
            TRSM_MDI_CD,
            RGST_TM,
            RGST_EMP_ID,
            UPDT_DT,
            UPDT_TM,
            UPDT_EMP_ID
        FROM TB_NTI_TRSM_RGST_DTL
        <where>
            <if test="rgstDt != null">
                AND RGST_DT = #{rgstDt}
            </if>
            <if test="seq != null">
                AND SEQ = #{seq}
            </if>
            <if test="ntiSeq != null">
                AND NTI_SEQ = #{ntiSeq}
            </if>
            <if test="trsmMdiCd != null and trsmMdiCd != ''">
                AND TRSM_MDI_CD = #{trsmMdiCd}
            </if>
            <if test="rgstEmpId != null and rgstEmpId != ''">
                AND RGST_EMP_ID = #{rgstEmpId}
            </if>
        </where>
        ORDER BY RGST_DT DESC, SEQ DESC
    </select>

    <!-- 공지사항 발송등록 명세 상세 조회 -->
    <select id="selectNtiTrsmRgstDtl" resultType="com.ERI.demo.vo.NtiTrsmRgstDtlVO">
        SELECT 
            RGST_DT,
            SEQ,
            NTI_SEQ,
            TRSM_MDI_CD,
            RGST_TM,
            RGST_EMP_ID,
            UPDT_DT,
            UPDT_TM,
            UPDT_EMP_ID
        FROM TB_NTI_TRSM_RGST_DTL
        WHERE RGST_DT = #{rgstDt} AND SEQ = #{seq}
    </select>

    <!-- 공지사항 발송등록 명세 등록 -->
    <insert id="insertNtiTrsmRgstDtl" parameterType="com.ERI.demo.vo.NtiTrsmRgstDtlVO">
        INSERT INTO TB_NTI_TRSM_RGST_DTL (
            RGST_DT,
            SEQ,
            NTI_SEQ,
            TRSM_MDI_CD,
            RGST_TM,
            RGST_EMP_ID
        ) VALUES (
            #{rgstDt},
            #{seq},
            #{ntiSeq},
            #{trsmMdiCd},
            #{rgstTm},
            #{rgstEmpId}
        )
    </insert>

    <!-- 공지사항 발송등록 명세 수정 -->
    <update id="updateNtiTrsmRgstDtl" parameterType="com.ERI.demo.vo.NtiTrsmRgstDtlVO">
        UPDATE TB_NTI_TRSM_RGST_DTL
        SET 
            NTI_SEQ = #{ntiSeq},
            TRSM_MDI_CD = #{trsmMdiCd},
            UPDT_DT = #{updtDt},
            UPDT_TM = #{updtTm},
            UPDT_EMP_ID = #{updtEmpId}
        WHERE RGST_DT = #{rgstDt} AND SEQ = #{seq}
    </update>

    <!-- 공지사항 발송등록 명세 삭제 -->
    <delete id="deleteNtiTrsmRgstDtl">
        DELETE FROM TB_NTI_TRSM_RGST_DTL
        WHERE RGST_DT = #{rgstDt} AND SEQ = #{seq}
    </delete>

</mapper> 